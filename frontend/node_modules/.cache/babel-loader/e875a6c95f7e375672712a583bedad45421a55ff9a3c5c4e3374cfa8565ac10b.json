{"ast":null,"code":"import React,{useState}from'react';import{Routes,Route,Navigate,Link,useLocation}from'react-router-dom';import MainPage from'./components/MainPage';import LoginPage from'./components/LoginPage';import RegisterPage from'./components/RegisterPage';import GoodsManagement from'./components/GoodsManagement';import AddProductPage from'./components/AddProductPage';import EditProductPage from'./components/EditProductPage';import ShoppingCartDrawer from'./components/ShoppingCartDrawer';import{ShoppingCartIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);const[cartOpen,setCartOpen]=useState(false);const[searchKeyword,setSearchKeyword]=useState('');const location=useLocation();const path=location.pathname.replace(/\\/+$/,'');// ÁßªÈô§Êú´Â∞æÊñúÊù†\nconst isAuthPage=path==='/login'||path==='/register';const handleLogin=userData=>{setUser(userData);};const handleLogout=()=>{setUser(null);};return/*#__PURE__*/_jsxs(_Fragment,{children:[!isAuthPage&&/*#__PURE__*/_jsx(\"nav\",{className:\"bg-black text-white sticky top-0 z-50 px-4 sm:px-6 lg:px-8 py-3 shadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/logo.jpg\",alt:\"ECSite\",className:\"h-16 w-auto\"})}),(user===null||user===void 0?void 0:user.role)==='merchant'&&/*#__PURE__*/_jsx(Link,{to:\"/goods\",className:\"text-sm border border-white px-3 py-1.5 rounded hover:bg-white hover:text-black transition\",children:\"Manage Products\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full sm:w-1/2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uD83D\\uDD0D Search products by name\",value:searchKeyword,onChange:e=>setSearchKeyword(e.target.value),className:\"w-full px-4 py-2 text-black border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm\",children:[\"Hi, \",user.username]}),user.role==='customer'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCartOpen(true),className:\"relative p-1 hover:text-indigo-400\",title:\"Shopping Cart\",children:/*#__PURE__*/_jsx(ShoppingCartIcon,{className:\"h-6 w-6\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"text-sm border border-white hover:bg-white hover:text-black px-3 py-1 rounded transition\",children:\"Logout\"})]}):/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"button\",{className:\"text-sm border border-white text-white px-4 py-1.5 rounded hover:bg-white hover:text-black transition\",children:\"Sign In\"})})})]})}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(MainPage,{user:user,searchKeyword:searchKeyword,setSearchKeyword:setSearchKeyword})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginPage,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(RegisterPage,{onRegister:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/goods\",element:(user===null||user===void 0?void 0:user.role)==='merchant'?/*#__PURE__*/_jsx(GoodsManagement,{user:user}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/add-product\",element:(user===null||user===void 0?void 0:user.role)==='merchant'?/*#__PURE__*/_jsx(AddProductPage,{user:user}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/edit-product/:id\",element:/*#__PURE__*/_jsx(EditProductPage,{user:user})})]}),(user===null||user===void 0?void 0:user.role)==='customer'&&/*#__PURE__*/_jsx(ShoppingCartDrawer,{username:user.username,open:cartOpen,setOpen:setCartOpen})]});}export default App;","map":{"version":3,"names":["React","useState","Routes","Route","Navigate","Link","useLocation","MainPage","LoginPage","RegisterPage","GoodsManagement","AddProductPage","EditProductPage","ShoppingCartDrawer","ShoppingCartIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","user","setUser","cartOpen","setCartOpen","searchKeyword","setSearchKeyword","location","path","pathname","replace","isAuthPage","handleLogin","userData","handleLogout","children","className","to","src","alt","role","type","placeholder","value","onChange","e","target","username","onClick","title","element","onLogin","onRegister","open","setOpen"],"sources":["/data/ECSite-demo/frontend/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  Routes, Route, Navigate, Link, useLocation\n} from 'react-router-dom';\nimport MainPage from './components/MainPage';\nimport LoginPage from './components/LoginPage';\nimport RegisterPage from './components/RegisterPage';\nimport GoodsManagement from './components/GoodsManagement';\nimport AddProductPage from './components/AddProductPage';\nimport EditProductPage from './components/EditProductPage';\nimport ShoppingCartDrawer from './components/ShoppingCartDrawer';\nimport { ShoppingCartIcon } from '@heroicons/react/24/outline';\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [cartOpen, setCartOpen] = useState(false);\n  const [searchKeyword, setSearchKeyword] = useState('');\n\n  const location = useLocation();\n  const path = location.pathname.replace(/\\/+$/, ''); // ÁßªÈô§Êú´Â∞æÊñúÊù†\n  const isAuthPage = path === '/login' || path === '/register';\n\n  const handleLogin = (userData) => {\n    setUser(userData);\n  };\n\n  const handleLogout = () => {\n    setUser(null);\n  };\n\n  return (\n    <>\n      {/* ‚úÖ ‰ªÖÂú®ÈùûÁôªÂΩï/Ê≥®ÂÜåÈ°µÈù¢ÊòæÁ§∫ÂØºËà™Ê†è */}\n      {!isAuthPage && (\n        <nav className=\"bg-black text-white sticky top-0 z-50 px-4 sm:px-6 lg:px-8 py-3 shadow\">\n          <div className=\"max-w-7xl mx-auto flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n            <div className=\"flex items-center space-x-6\">\n              <Link to=\"/\">\n                <img src=\"/logo.jpg\" alt=\"ECSite\" className=\"h-16 w-auto\" />\n              </Link>\n              {user?.role === 'merchant' && (\n                <Link\n                  to=\"/goods\"\n                  className=\"text-sm border border-white px-3 py-1.5 rounded hover:bg-white hover:text-black transition\"\n                >\n                  Manage Products\n                </Link>\n              )}\n            </div>\n\n            <div className=\"w-full sm:w-1/2\">\n              <input\n                type=\"text\"\n                placeholder=\"üîç Search products by name\"\n                value={searchKeyword}\n                onChange={e => setSearchKeyword(e.target.value)}\n                className=\"w-full px-4 py-2 text-black border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400\"\n              />\n            </div>\n\n            <div className=\"flex items-center space-x-4\">\n              {user ? (\n                <>\n                  <span className=\"text-sm\">Hi, {user.username}</span>\n                  {user.role === 'customer' && (\n                    <button\n                      onClick={() => setCartOpen(true)}\n                      className=\"relative p-1 hover:text-indigo-400\"\n                      title=\"Shopping Cart\"\n                    >\n                      <ShoppingCartIcon className=\"h-6 w-6\" />\n                    </button>\n                  )}\n                  <button\n                    onClick={handleLogout}\n                    className=\"text-sm border border-white hover:bg-white hover:text-black px-3 py-1 rounded transition\"\n                  >\n                    Logout\n                  </button>\n                </>\n              ) : (\n                <Link to=\"/login\">\n                  <button className=\"text-sm border border-white text-white px-4 py-1.5 rounded hover:bg-white hover:text-black transition\">\n                    Sign In\n                  </button>\n                </Link>\n              )}\n            </div>\n          </div>\n        </nav>\n      )}\n\n      {/* È°µÈù¢ÂÜÖÂÆπ */}\n      <Routes>\n        <Route\n          path=\"/\"\n          element={\n            <MainPage\n              user={user}\n              searchKeyword={searchKeyword}\n              setSearchKeyword={setSearchKeyword}\n            />\n          }\n        />\n        <Route path=\"/login\" element={<LoginPage onLogin={handleLogin} />} />\n        <Route path=\"/register\" element={<RegisterPage onRegister={handleLogin} />} />\n        <Route\n          path=\"/goods\"\n          element={\n            user?.role === 'merchant' ? (\n              <GoodsManagement user={user} />\n            ) : (\n              <Navigate to=\"/login\" />\n            )\n          }\n        />\n        <Route\n          path=\"/add-product\"\n          element={\n            user?.role === 'merchant' ? (\n              <AddProductPage user={user} />\n            ) : (\n              <Navigate to=\"/login\" />\n            )\n          }\n        />\n        <Route path=\"/edit-product/:id\" element={<EditProductPage user={user} />} />\n      </Routes>\n\n      {/* Ë¥≠Áâ©ËΩ¶ */}\n      {user?.role === 'customer' && (\n        <ShoppingCartDrawer\n          username={user.username}\n          open={cartOpen}\n          setOpen={setCartOpen}\n        />\n      )}\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}