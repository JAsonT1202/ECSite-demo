{"ast":null,"code":"// src/components/LoginPage.js\nimport React,{useState}from'react';import axios from'axios';import{useNavigate,Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(_ref){let{onLogin}=_ref;const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[role,setRole]=useState('customer');const[errorMsg,setErrorMsg]=useState('');// ← For showing error message\nconst navigate=useNavigate();const API_BASE_URL=\"http://13.230.72.70/api/\";const handleSubmit=e=>{e.preventDefault();setErrorMsg('');// Clear previous error\naxios.post(`${API_BASE_URL}/login`,{username,password,role}).then(response=>{onLogin(response.data);navigate('/');}).catch(error=>{var _error$response,_error$response$data;// Display error in a red alert box instead of alert()\nconst detail=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||'Sign in failed.';setErrorMsg(detail);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8 bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sm:mx-auto sm:w-full sm:max-w-sm\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/logo.jpg\",alt:\"ECSite\",className:\"mx-auto h-24 w-auto\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-10 text-center text-2xl font-bold tracking-tight text-gray-900\",children:\"Sign in to your account\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-10 sm:mx-auto sm:w-full sm:max-w-sm\",children:[errorMsg&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 rounded-md bg-red-50 border-l-4 border-red-400 p-4 text-red-700\",children:errorMsg}),/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-6\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",className:\"block text-sm font-medium text-gray-900\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{id:\"username\",type:\"text\",value:username,onChange:e=>setUsername(e.target.value),required:true,className:\"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900  outline outline-1 outline-gray-300 placeholder:text-gray-400  focus:outline-indigo-600 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-900\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true,className:\"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900  outline outline-1 outline-gray-300 placeholder:text-gray-400  focus:outline-indigo-600 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-900\",children:\"Role\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex space-x-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"customer\",checked:role==='customer',onChange:e=>setRole(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Customer\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"merchant\",checked:role==='merchant',onChange:e=>setRole(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Merchant\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold  text-white hover:bg-indigo-500\",children:\"Sign in\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-10 text-center text-sm text-gray-500\",children:[\"Not a member?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"font-semibold text-indigo-600 hover:text-indigo-500\",children:\"Register here\"})]})]})]});}export default LoginPage;","map":{"version":3,"names":["React","useState","axios","useNavigate","Link","jsx","_jsx","jsxs","_jsxs","LoginPage","_ref","onLogin","username","setUsername","password","setPassword","role","setRole","errorMsg","setErrorMsg","navigate","API_BASE_URL","handleSubmit","e","preventDefault","post","then","response","data","catch","error","_error$response","_error$response$data","detail","className","children","src","alt","onSubmit","htmlFor","id","type","value","onChange","target","required","checked","to"],"sources":["/data/ECSite-demo/frontend/src/components/LoginPage.js"],"sourcesContent":["// src/components/LoginPage.js\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate, Link } from 'react-router-dom';\n\nfunction LoginPage({ onLogin }) {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [role, setRole] = useState('customer');\n  const [errorMsg, setErrorMsg] = useState(''); // ← For showing error message\n  const navigate = useNavigate();\n  const API_BASE_URL = \"http://13.230.72.70/api/\";\n\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setErrorMsg(''); // Clear previous error\n    axios.post(`${API_BASE_URL}/login`, { username, password, role })\n      .then(response => {\n        onLogin(response.data);\n        navigate('/');\n      })\n      .catch(error => {\n        // Display error in a red alert box instead of alert()\n        const detail = error.response?.data?.detail || 'Sign in failed.';\n        setErrorMsg(detail);\n      });\n  };\n\n  return (\n    <div className=\"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8 bg-white\">\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-sm\">\n        <img\n          src=\"/logo.jpg\"\n          alt=\"ECSite\"\n          className=\"mx-auto h-24 w-auto\"\n          />\n\n        <h2 className=\"mt-10 text-center text-2xl font-bold tracking-tight text-gray-900\">\n          Sign in to your account\n        </h2>\n      </div>\n\n      <div className=\"mt-10 sm:mx-auto sm:w-full sm:max-w-sm\">\n        {/* Error Message (red alert) */}\n        {errorMsg && (\n          <div className=\"mb-4 rounded-md bg-red-50 border-l-4 border-red-400 p-4 text-red-700\">\n            {errorMsg}\n          </div>\n        )}\n\n        <form className=\"space-y-6\" onSubmit={handleSubmit}>\n          <div>\n            <label htmlFor=\"username\" className=\"block text-sm font-medium text-gray-900\">\n              Username\n            </label>\n            <input\n              id=\"username\"\n              type=\"text\"\n              value={username}\n              onChange={e => setUsername(e.target.value)}\n              required\n              className=\"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 \n                         outline outline-1 outline-gray-300 placeholder:text-gray-400 \n                         focus:outline-indigo-600 sm:text-sm\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-900\">\n              Password\n            </label>\n            <input\n              id=\"password\"\n              type=\"password\"\n              value={password}\n              onChange={e => setPassword(e.target.value)}\n              required\n              className=\"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 \n                         outline outline-1 outline-gray-300 placeholder:text-gray-400 \n                         focus:outline-indigo-600 sm:text-sm\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-900\">Role</label>\n            <div className=\"mt-2 flex space-x-4\">\n              <label className=\"flex items-center space-x-2\">\n                <input\n                  type=\"radio\"\n                  value=\"customer\"\n                  checked={role === 'customer'}\n                  onChange={e => setRole(e.target.value)}\n                />\n                <span>Customer</span>\n              </label>\n              <label className=\"flex items-center space-x-2\">\n                <input\n                  type=\"radio\"\n                  value=\"merchant\"\n                  checked={role === 'merchant'}\n                  onChange={e => setRole(e.target.value)}\n                />\n                <span>Merchant</span>\n              </label>\n            </div>\n          </div>\n\n          <button\n            type=\"submit\"\n            className=\"w-full rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold \n                       text-white hover:bg-indigo-500\"\n          >\n            Sign in\n          </button>\n        </form>\n\n        <p className=\"mt-10 text-center text-sm text-gray-500\">\n          Not a member?{' '}\n          <Link to=\"/register\" className=\"font-semibold text-indigo-600 hover:text-indigo-500\">\n            Register here\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default LoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}